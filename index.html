<!DOCTYPE html>
<!-- index.html -->
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="SortierenV2">
<link rel="apple-touch-icon" href="icon.png">
<link rel="manifest" href="manifest.json" />
<meta name="theme-color" content="#2196f3">
<link rel="apple-touch-icon" href="apple-touch-icon1.png">

  
</head>


<!---========================= HIER HTML ===========================-->

<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Budget Manager</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>



   <!-- ================= POPUP: Einstellungen ================= -->
  <div id="popup2-overlay">
    <div id="popup2">
      <button id="popup2-close">&times;</button>
      <h2>Einstellungen</h2>
      <!-- <p>Hier kannst du deine Einstellungen anpassen.</p> -->
      <button id="open-kategorie-popup" style="margin-top: 20px;">Kategorien verwalten</button>
      <button id="open-kategorie-sortieren-popup" style="margin-top: 20px;">Kategorien sortieren</button>
      <button id="open-wiederkehrende-popup" style="margin-top: 20px;">Wiederkehrende Zahlungen</button>
      <button id="open-budget-popup" style="margin-top: 20px;">Budget verwalten</button>
    </div>

  <!-- ================= POPUP: Kategorien-Verwaltung ================= -->
    <!-- Kategorien-Verwaltungs-Popup -->
<!-- Kategorien-Verwaltungs-Popup -->
<div id="kategorie-popup-overlay" class="popup-overlay">
  <div id="kategorie-popup" class="popup-content" role="dialog" aria-modal="true">
    <div class="popup-header">
  <h3 class="popup-title">Kategorien verwalten</h3>
  <button id="kategorie-popup-close" class="popup-close" aria-label="Schlie√üen">&times;</button>
</div>

    <label for="typ-auswahl"></label>
    <select id="typ-auswahl">
      <option value="einnahme">Einzahlung</option>
      <option value="ausgabe">Auszahlung</option>
      <option value="investition">Investition</option>
    </select>

    <input type="text" id="wordInput" placeholder="Wort eingeben" />
    <button id="addWordBtn">Hinzuf√ºgen</button>

    <ul id="kategorie-liste"></ul>
  </div>
</div>


<!-- ================= POPUP: Budget-Verwaltung ================= -->
<!-- Budget-Verwaltungs-Popup -->
 <!-- Budget Popup -->
<div id="budget-popup-overlay" class="overlay hidden">
  <div id="budget-popup" class="popup">
    
    <!-- Header mit Schlie√üen-Button und Titel -->
    <div class="popup-header">
      <button class="close-btn" id="budget-close" aria-label="Schlie√üen">&times;</button>
      <h2 class="popup-title">Budget festlegen</h2>
    </div>

    <!-- Budget-Eingabe -->
    <input type="number" id="budget-input" placeholder="z.‚ÄØB. 1500 ‚Ç¨" />

    <!-- Buttons -->
    <div class="budget-buttons">
      <button id="save-budget">Speichern</button>
      <button id="clear-budget">L√∂schen</button>
    </div>

    <!-- Budget-√úbersicht -->
    <div id="budget-uebersicht" class="budget-uebersicht">
      
      <p><span>Feste Einnahmen:</span> <span class="betrag" id="wk-einnahmen">‚Äì ‚Ç¨</span></p>
      <p><span>Zus√§tzliche Einnahmen:</span> <span class="betrag" id="zusatz-einnahmen">‚Äì ‚Ç¨</span></p>
      <p><span>Feste Ausgaben:</span> <span class="betrag" id="wk-ausgaben">‚Äì ‚Ç¨</span></p>
      <p><span>Investitionen:</span> <span class="betrag" id="investition">‚Äì ‚Ç¨</span></p>
      <p><span>Vorgeschlagenes Budget:</span> <span class="betrag" id="vorgeschlagenes-budget">‚Äì ‚Ç¨</span></p>
    </div>

  </div>
</div>

<!-- Budget-Verwaltungs Popup Ende -->

<!-- ================= POPUP: Wiederkehrende Zahlungen ================= -->
<div id="wiederkehrende-popup-overlay" class="overlay hidden">
  <div id="wiederkehrende-popup" class="popup">
    <button class="close-btn" id="wiederkehrende-close">√ó</button>
    <h2>Wiederkehrende Zahlung</h2>

    <!-- Buttons f√ºr Typ -->
    <div id="typ-buttons">
      <button type="button" class="typ-btn" data-typ="einnahme">Einzahlung</button>
      <button type="button" class="typ-btn" data-typ="investition">Invest</button>
      <button type="button" class="typ-btn" data-typ="ausgabe">Auszahlung</button>
    </div>

    <!-- Verstecktes Input f√ºr Typ -->
    <input type="hidden" id="wiederkehrende-typ" required>

    <form id="wiederkehrende-form">
      <table>
        <tr>
          <td colspan="2">
            <div class="betrag-row">
              <label for="wiederkehrende-betrag">Betrag (‚Ç¨):</label>
              <input type="text" id="wiederkehrende-betrag" required readonly />
            </div>
          </td>
        </tr>
        <tr>
          <td colspan="2">
            <div id="vk-wiederkehrende" class="virtual-keyboard" style="display:none;">
              <div class="vk-row">
                <button type="button" class="vk-btn operator">+</button>
                <button type="button" class="vk-btn operator">-</button>
                <button type="button" class="vk-btn operator">√ó</button>
                <button type="button" class="vk-btn operator">√∑</button>
              </div>
              <div class="vk-row">
                <button type="button" class="vk-btn">7</button>
                <button type="button" class="vk-btn">8</button>
                <button type="button" class="vk-btn">9</button>
                <button type="button" id="vk-equal" class="vk-btn operator">=</button>
              </div>
              <div class="vk-row">
                <button type="button" class="vk-btn">4</button>
                <button type="button" class="vk-btn">5</button>
                <button type="button" class="vk-btn">6</button>
                <button type="button" class="vk-btn comma">.</button>
              </div>
              <div class="vk-row">
                <button type="button" class="vk-btn">1</button>
                <button type="button" class="vk-btn">2</button>
                <button type="button" class="vk-btn">3</button>
                <button type="button" id="vk-backspace" class="vk-btn backspace">‚Üê</button>
              </div>
              <div class="vk-row">
                <div style="flex:1"></div>
                <button type="button" class="vk-btn">0</button>
                <div style="flex:1"></div>
                <button type="button" id="vk-ok" class="vk-btn ok-btn">OK</button>
              </div>
            </div>
          </td>
        </tr>
        
        <tr>
  <tr>
  <td colspan="2">
    <div class="kategorie-row2">
      <label for="wiederkehrende-kategorie">Kategorie:</label>
      <select id="wiederkehrende-kategorie" required>
  <option disabled selected>Keine Kategorien verf√ºgbar</option>
</select>

    </div>
  </td>
</tr>

        </tr>
        <tr>
          <td colspan="2">
            <div class="intervall-row">
            <label for="wiederkehrende-intervall">Intervall:</label>
            <select id="wiederkehrende-intervall" required>
              <option value="Monatsende">Monatsende</option>
              <option value="Jahresende">Jahresende</option>
              <option value="Wochenende">Wochenende</option>
              <option value="Monatsanfang">Monatsanfang</option>
              <option value="Jahresanfang">Jahresanfang</option>
              <option value="Wochenanfang">Wochenanfang</option>
            </select>
            </div>
          </td>
        </tr>
        
  <tr>
      <td colspan="2">
        <div class="von-row">
          <label for="wiederkehrende-start">Von:</label>
          <input type="date" id="wiederkehrende-start" required />
        </div>
      </td>
    </tr>
    <tr>
      <td colspan="2">
        <div class="bis-row">
          <label for="wiederkehrende-ende">Bis:</label>
          <input type="date" id="wiederkehrende-ende" required />
        </div>
      </td>
    </tr>
        <tr>
  <td colspan="2" style="padding-bottom: 10px;">
    <button type="submit" id="speichern-btn">Speichern</button>
  </td>
</tr>
<!-- Button zum √ñffnen des gespeicherten Eintr√§ge-Popups -->
<tr>
  <td colspan="2" style="padding-top: 0;">
    <button type="button" id="show-eintraege-btn">Gespeicherte Eintr√§ge anzeigen</button>
  </td>
</tr>
      </table>
    </form>

  </div>
</div>


<!-- Neues Popup f√ºr gespeicherte Eintr√§ge -->
<div id="eintraege-popup-overlay" class="overlay hidden">
  <div class="popup" style="max-width: 400px; max-height: 80vh; overflow-y: auto;">
    <button class="close-btn" id="eintraege-close">√ó</button>
    <h3>Gespeicherte Eintr√§ge</h3>
    <ul id="wiederkehrende-liste" style="max-height: 60vh; overflow-y: auto;"></ul>
  </div>
</div>


<!-- ================= POPUP: Wiederkehrende Zahlungen Ende ================= -->



<!-- ================= POPUP: Kategorien sortieren Start ================= -->
<!-- Kategorien-Sortieren-Popup -->
<div id="kategorie-sortieren-popup-overlay" style="
  display: none;
  position: fixed;
  top: 0; left: 0; right: 0; bottom: 0;
  background: rgba(0, 0, 0, 0.5);
  justify-content: center;
  align-items: center;
  z-index: 1100;
">
  <div id="kategorie-sortieren-popup" style="
    background: white;
    padding: 20px;
    border-radius: 10px;
    max-width: 700px;
    width: 95%;
    max-height: 90%;
    overflow-y: auto;
    position: relative;
  ">
    <div class="popup-header">
  <h3 class="popup-title">Kategorien sortieren & gruppieren</h3>
  <button id="kategorie-sortieren-popup-close" class="close-btn" aria-label="Schlie√üen">&times;</button>
</div>



    <div style="text-align: center; margin-bottom: 20px;">
      <button id="sort-tab-einnahme" class="sort-tab active einnahme">Einzahlungen</button>
      <button id="sort-tab-ausgabe" class="sort-tab ausgabe">Auszahlungen</button>

    </div>

    <div id="sortier-container" class="sortier-wrapper"></div>

    <button id="add-group-btn" style="margin-top: 15px;">Neue Oberkategorie</button>
  </div>
</div>




<!-- ================= POPUP: Kategorien sortieren Ende ================= -->







  </div>

  <script>
    // Auslagerung 1.1
    // Auslagerung 1.2
  </script>

  <div id="header">
  <div id="refresh-icon" title="Seite aktualisieren" role="button" tabindex="0">&#10227;</div>
  <h1>Budget Manager</h1>
  <div id="settings-icon" title="Einstellungen" role="button" tabindex="0">&#9776;</div>
</div>

<script>
  // Warten bis DOM geladen ist
  document.addEventListener('DOMContentLoaded', () => {
    const refreshBtn = document.getElementById('refresh-icon');

    refreshBtn.addEventListener('click', () => {
      location.reload();
    });

    // F√ºr Tastaturbedienung (Enter oder Space)
    refreshBtn.addEventListener('keydown', (e) => {
      if (e.key === 'Enter' || e.key === ' ') {
        e.preventDefault();
        location.reload();
      }
    });
  });
</script>





<!-- ================= Tabs f√ºr Navigation ================= -->
  <!-- Tabs -->
  <div id="tabs" class="tab-container">
  <div class="tab-button" id="tab-kalender">
    <div>üìÖ</div>
    <small>Kalender</small>
  </div>
  <div class="tab-button" id="tab-statistik">
    <div>üìä</div>
    <small>Statistik</small>
  </div>
  <div class="tab-button" id="tab-uebersicht">
    <div>üìã</div>
    <small>√úbersicht</small>
  </div>
  <div class="tab-button" id="tab-notizen">
    <div>üìù</div>
    <small>Notizen</small>
  </div>
</div>


   <!-- ================= Tab-Inhalte ================= -->
  <div id="tab-content">
    <!-- ========== Kalender-Tab ========== -->
    <!-- Kalender Tab -->
    <div id="tab-content-kalender" class="active">
      <form id="form">
        
        <input type="date" id="datum" required style="display:none;" />

        <!--<button type="submit">Hinzuf√ºgen</button> -->
      </form>


  <!-- Fixierter oberer Bereich -->
  <div id="fixed-top-container">

    

    <!-- Monats√ºbersicht -->
    <div id="monatsuebersicht">
  <div class="uebersicht-feld einnahmen">
    <strong>Einnahmen</strong><br>
    <span id="monat-einnahmen">0.00 ‚Ç¨</span>
  </div>
  <div class="uebersicht-feld budget">
    <strong>Budget</strong><br>
    <span id="monat-budget">0.00 ‚Ç¨</span>
  </div>
  <div class="uebersicht-feld ausgaben">
    <strong>Ausgaben</strong><br>
    <span id="monat-ausgaben">0.00 ‚Ç¨</span>
  </div>
</div>


    <!-- Budget-Slider -->
    <div id="budget-progress-container">
      <div id="budget-bar-background">
        <div id="budget-bar-fill"></div>
        <div id="budget-time-marker"></div>
      </div>
      <div id="budget-stand-text"></div>
    </div>

    <!-- Monatsnavigation (fixiert) -->
<div id="monatsteuerelemente">
  <button id="vorherigerMonat" aria-label="Vorheriger Monat">&#x25C0;</button> <!-- ‚óÄ -->
  <div id="monatanzeige">Juli 2025</div>
  <button id="naechsterMonat" aria-label="N√§chster Monat">&#x25B6;</button> <!-- ‚ñ∂ -->
</div>


  </div>

  <!-- Scrollbarer Inhalt darunter -->
  <div id="scroll-content">
  <div id="wochentage">
    <div>Mo</div>
    <div>Di</div>
    <div>Mi</div>
    <div>Do</div>
    <div>Fr</div>
    <div>Sa</div>
    <div>So</div>
  </div>
  <div id="kalender"></div>
  <h2 style="font-size: 20px;">Eintr√§ge f√ºr ausgew√§hlten Tag</h2>


  <ul id="liste"></ul>
</div>

</body>
    </div>


<!-- ========== Statistik-Tab ========== -->
    <div id="tab-content-statistik">
      

      <h2>Statistik</h2>

<!-- Zeitraum Auswahl & Navigation im Statistik-Tab -->
<!-- Zeitraum Auswahl im Button-Stil -->
<div id="zeitraum-auswahl-buttons">
  <button data-modus="woche" class="zeitraum-button">Woche</button>
  <button data-modus="monat" class="zeitraum-button active">Monat</button>
  <button data-modus="jahr" class="zeitraum-button">Jahr</button>
</div>

<!-- Zeitraum Navigation -->
<div id="zeitraum-navigation">
  <button id="zeitraum-zurueck" class="nav-button">&#x25C0;</button>
  <span id="zeitraum-anzeige">Juli 2025</span>
  <button id="zeitraum-vor" class="nav-button">&#x25B6;</button>
</div>





<!-- Slider Ein- Ausgaben -->
      <div class="container">
  <div class="nav" id="nav">
    <div data-pos="0">Einnahmen</div>
    <div data-pos="1">Budget</div>
    <div data-pos="2">Ausgaben</div>
    <div class="underline"></div>
  </div>
</div>
<script>
  document.addEventListener('DOMContentLoaded', () => {
  const nav = document.getElementById('nav');
  const underline = nav.querySelector('.underline');
  const items = nav.querySelectorAll('div[data-pos]');
  
  items.forEach(item => {
    item.addEventListener('click', () => {
      const pos = parseInt(item.getAttribute('data-pos'));
      underline.style.left = (pos * 33.3333) + '%';
    });
  });
  const chartSections = {
  0: document.getElementById('chart-einnahmen'),
  1: document.getElementById('chart-budget'),
  2: document.getElementById('chart-ausgaben')
};

let aktiverChartIndex = 0;

items.forEach(item => {
  item.addEventListener('click', () => {
    const pos = parseInt(item.getAttribute('data-pos'));
    underline.style.left = (pos * 33.3333) + '%';

    // Sichtbarkeit der Chart-Sektionen steuern
    chartSections[aktiverChartIndex].style.display = 'none';
    chartSections[pos].style.display = 'block';
    aktiverChartIndex = pos;

    // Optional: Daten f√ºr den neuen Graphen laden
    ladeStatistikGraph();
  });
});
});
</script>
      <!-- Slider Ein- Ausgaben Ende -->
     
<!-- Statistik-Graphen -->
<div id="statistik-graph-container">
  <div id="chart-einnahmen" class="chart-section">
    üìà Graph f√ºr Einnahmen
    <canvas id="chart" width="700" height="300" style="border:1px solid #ccc; border-radius:6px;"></canvas>
  </div>
  <div id="chart-budget" class="chart-section" style="display: none;">üìä Graph f√ºr Budget</div>
  <div id="chart-ausgaben" class="chart-section" style="display: none;">üìâ Graph f√ºr Ausgaben</div>
</div>

</div>
    </div>
  </div>

  
<!-- ======================================= Statistik-Tab Ende ======================================= -->

<!-- ======================================= √úbersicht-Tab Start ======================================= -->

<div id="tab-content" style="margin-top: 100px;">
    <!-- ========== Kalender-Tab ========== -->
    <!-- Kalender Tab -->
    <div id="tab-content-uebersicht" class="active">
      

<h2>√úbersicht</h2>



  <!-- Zeitraum Auswahl -->
  <div id="uebersicht-zeitraum-auswahl-buttons">
    <button data-modus="woche" class="uebersicht-zeitraum-button">Woche</button>
    <button data-modus="monat" class="uebersicht-zeitraum-button active">Monat</button>
    <button data-modus="jahr" class="uebersicht-zeitraum-button">Jahr</button>
  </div>

  <!-- Zeitraum Navigation -->
  <div id="uebersicht-zeitraum-navigation">
    <button id="uebersicht-zeitraum-zurueck" class="nav-button">&#x25C0;</button>
    <span id="uebersicht-zeitraum-anzeige">Juli 2025</span>
    <button id="uebersicht-zeitraum-vor" class="nav-button">&#x25B6;</button>
  </div>

  <!-- Slider Ein- Ausgaben -->
  <div class="container">
    <div class="nav" id="uebersicht-nav">
      <div data-pos="0">Einnahmen</div>
      <div data-pos="1">Budget</div>
      <div data-pos="2">Ausgaben</div>
      <div class="underline"></div>
    </div>
  </div>

  <!-- Charts oder Daten-Anzeigen (mit IDs wie unten erwartet) -->
  <div id="uebersicht-chart-einnahmen">...</div>
  <div id="uebersicht-chart-budget" style="display:none">...</div>
  <div id="uebersicht-chart-ausgaben" style="display:none">...</div>
</div>



</div>
<!-- ======================================= √úbersicht-Tab Ende ======================================= -->



  <!-- ================= PLUS-BUTTON & Formular f√ºr Eintrag ================= -->
<!-- ================= PLUS-BUTTON & Formular f√ºr Eintrag ================= -->
<button id="plus-button">+</button>

  <!-- Popup-Overlay hinter plus button-->
  <div id="popup-overlay">
    <div id="popup">
      <button id="popup-close">&times;</button>
      <h2>Neuer Eintrag</h2>

      <!-- Buttons f√ºr Typ -->
      <div id="typ-buttons">
        <button type="button" class="typ-btn" data-typ="einnahme">Einzahlung</button>
        <button type="button" class="typ-btn" data-typ="investition">Invest</button>
        <button type="button" class="typ-btn" data-typ="ausgabe">Auszahlung</button>
      </div>

      <!-- Formular -->
<form id="popup-form">
  <input type="hidden" id="popup-typ" name="typ" required />

  <table>
    <tr>
  <td colspan="2">
    <div class="betrag-row1">
      <label for="popup-betrag">Betrag:</label>
      <input type="text" id="popup-betrag" name="betrag" placeholder="Betrag (‚Ç¨)" readonly required />
    </div>
  </td>
</tr>
  
  
<tr>
  <td>
    <div id="virtual-keyboard" style="display:none;">
  <div class="vk-row">
    <button type="button" class="vk-btn operator">+</button>
    <button type="button" class="vk-btn operator">-</button>
    <button type="button" class="vk-btn operator">√ó</button>
    <button type="button" class="vk-btn operator">√∑</button>
  </div>
  <div class="vk-row">
    <button type="button" class="vk-btn">7</button>
    <button type="button" class="vk-btn">8</button>
    <button type="button" class="vk-btn">9</button>
    <button type="button" id="vk-equal" class="vk-btn operator">=</button>
  </div>
  <div class="vk-row">
    <button type="button" class="vk-btn">4</button>
    <button type="button" class="vk-btn">5</button>
    <button type="button" class="vk-btn">6</button>
    <button type="button" class="vk-btn comma">.</button>  <!-- Klasse "comma" hinzu -->
  </div>
  <div class="vk-row">
    <button type="button" class="vk-btn">1</button>
    <button type="button" class="vk-btn">2</button>
    <button type="button" class="vk-btn">3</button>
    <button type="button" id="vk-backspace" class="vk-btn backspace">‚Üê</button> <!-- Klasse "backspace" hinzu -->
  </div>
  <div class="vk-row">
    <div style="flex:1"></div>
    <button type="button" class="vk-btn" style="flex: 1;">0</button>  <!-- 0 mittig -->
    <div style="flex:1"></div>
    <button type="button" id="vk-ok" class="vk-btn ok-btn">OK</button>
  </div>
</div>

  </td>
</tr>

<tr>

</tr>

    <tr>
  <td colspan="2">
    <div class="kategorie-row1">
      <label for="wordSelect">Kategorie:</label>
      <select id="wordSelect">
        <option disabled selected>Keine W√∂rter verf√ºgbar</option>
      </select>
    </div>
  </td>
</tr>

    <tr>
  <td colspan="2">
    <div class="datum-row1">
      <label for="popup-datum">Datum:</label>
      <input type="date" id="popup-datum" name="datum" required />
    </div>
  </td>
</tr>

  </table>

  <button type="submit">Hinzuf√ºgen</button>
</form>


<!-- ================= SCRIPTS ================= -->
<!-- JavaScript -->
 <!-- Plus-Button Popup Logik -->
<script>
function waehleTyp(typ) {
  const alleTypBtns = document.querySelectorAll(".typ-btn");
  const popupTyp = document.getElementById("popup-typ");

  alleTypBtns.forEach(btn => {
    if (btn.dataset.typ === typ) {
      btn.classList.add("active");
    } else {
      btn.classList.remove("active");
    }
  });

  popupTyp.value = typ;
}

document.getElementById("plus-button").addEventListener("click", () => {
  const popupOverlay = document.getElementById("popup-overlay");
  const popupDatum = document.getElementById("popup-datum");

  popupOverlay.style.display = "flex";
  popupDatum.value = ausgewaehltesDatum;

  waehleTyp("ausgabe");  // Standardm√§√üig "Ausgabe" aktivieren
  updateSelect();        // Falls du diese Funktion brauchst
});
</script>


<!-- Plus-Button Popup Logik Ende -->

<script>
  const words = [];
</script>

<script>
document.querySelectorAll('.typ-btn').forEach(btn => {
  btn.addEventListener('click', () => {
    const selectedTyp = btn.dataset.typ;
    document.getElementById('popup-typ').value = selectedTyp;

    // Aktive Klasse setzen
    document.querySelectorAll('.typ-btn').forEach(b => {
      b.classList.toggle('active', b.dataset.typ === selectedTyp);
    });

    // Kategorien neu laden, falls relevant
    updateSelect();
  });
});



  let kategorien = {
  einnahme: [],
  ausgabe: []
};

// Beim Laden die Kategorien aus localStorage wiederherstellen
const gespeicherteKategorien = localStorage.getItem('kategorien');
if (gespeicherteKategorien) {
  try {
    kategorien = JSON.parse(gespeicherteKategorien);
  } catch (e) {
    console.error('Fehler beim Parsen gespeicherter Kategorien:', e);
  }
}
// Beim Laden die Kategorien aus localStorage wiederherstellen Ende


  function updateSelect() {
  const select = document.getElementById('wordSelect');
  const typ = document.getElementById('popup-typ').value;
  select.innerHTML = '';

  const kategorieListe = kategorien[typ] || [];

  if (kategorieListe.length === 0) {
    const option = document.createElement('option');
    option.text = 'Keine Kategorien verf√ºgbar';
    option.disabled = true;
    option.selected = true;
    select.add(option);
    return;
  }

  kategorieListe.forEach(word => {
    const option = document.createElement('option');
    option.text = word;
    select.add(option);
  });
}

  function addWord() {
  const input = document.getElementById('wordInput');
  const typAuswahl = document.getElementById('typ-auswahl');
  const typ = typAuswahl.value;
  const word = input.value.trim();

  if (word && !kategorien[typ].includes(word)) {
    kategorien[typ].push(word);

    // ‚úÖ Kategorien speichern
    localStorage.setItem('kategorien', JSON.stringify(kategorien));

    input.value = '';
    updateKategorieListe();

    if (document.getElementById('popup-typ').value === typ) {
      updateSelect();
    }
  }
}

  function updateKategorieListe() {
  const ul = document.getElementById('kategorie-liste');
  const typ = document.getElementById('typ-auswahl').value;
  ul.innerHTML = '';

  kategorien[typ].forEach((word, index) => {
    const li = document.createElement('li');
    li.style.display = 'flex';
    li.style.justifyContent = 'space-between';
    li.style.alignItems = 'center';

    const text = document.createElement('span');
    text.textContent = word;

    const loeschenBtn = document.createElement('button');
    loeschenBtn.textContent = '‚ùå';
    loeschenBtn.style.marginLeft = '10px';
    loeschenBtn.style.cursor = 'pointer';
    loeschenBtn.style.border = 'none';
    loeschenBtn.style.background = 'transparent';
    loeschenBtn.style.color = 'red';

    loeschenBtn.addEventListener('click', () => {
      kategorien[typ].splice(index, 1);
      localStorage.setItem('kategorien', JSON.stringify(kategorien));
      updateKategorieListe();
      // Wenn im Popup1 dieselbe Kategoriegruppe aktiv ist, Liste auch dort aktualisieren
      if (document.getElementById('popup-typ').value === typ) {
        updateSelect();
      }
    });

    li.appendChild(text);
    li.appendChild(loeschenBtn);
    ul.appendChild(li);
  });
}


  document.getElementById('typ-auswahl').addEventListener('change', () => {
    updateKategorieListe();
  });

  
</script>





<!-- Popup-Overlay fertig -->

<!-- Popup2 f√ºr Einstellungen -->
<!-- Popup2 f√ºr Einstellungen -->


<div id="popup2-overlay" style="
  display: none;
  position: fixed;
  top: 0; left: 0; right: 0; bottom: 0;
  background: rgba(0,0,0,0.5);
  justify-content: center;
  align-items: center;
  z-index: 1000;
">
  <div id="popup2" style="
    background: white;
    padding: 20px;
    border-radius: 10px;
    max-width: 400px;
    width: 90%;
    position: relative;
  ">
    <button id="popup2-close" style="
      position: absolute;
      top: 10px;
      right: 10px;
      font-size: 1.5rem;
      cursor: pointer;
      border: none;
      background: transparent;
    ">&times;</button>
    <h2>Einstellungen</h2>
    <p>Hier kannst du deine Einstellungen anpassen.</p>
     <!-- F√ºge hier deine Einstellungsfelder hinzu -->
      <!-- Einstellungsfeld f√ºr dynamische Kategorien -->
<div id="kategorie-verwalten">
  <h3>Kategorien verwalten</h3>

  <label for="typ-auswahl">Typ:</label>
  <select id="typ-auswahl">
    <option value="einnahme">Einzahlung</option>
    <option value="ausgabe">Auszahlung</option>
    <option value="investition">Investition</option>
  </select>

  <input type="text" id="neue-kategorie" placeholder="Neue Kategorie..." />

  <button id="hinzufuegen-kategorie">Hinzuf√ºgen</button>

  <ul id="kategorie-liste"></ul>
</div>



  </div>
</div>

<!--  Auslagerung 1.3 -->

<!-- Popup2 f√ºr Einstellungen fertig -->

<!-- Hilfsfunktion f√ºr Budget aktuallisieren -->
 <script>
  function berechneMonatsuebersicht(jahr, monat) {
  let einnahmen = 0;
  let ausgaben = 0;

  // Einnahmen und Ausgaben berechnen
  alleEintraege.forEach(eintrag => {
    const eintragsDatum = new Date(eintrag.datum);
    if (
      eintragsDatum.getFullYear() === jahr &&
      eintragsDatum.getMonth() === monat
    ) {
      if (eintrag.typ === "einnahme") {
        einnahmen += eintrag.betrag;
      } else if (eintrag.typ === "ausgabe") {
        ausgaben += eintrag.betrag;
      }
    }
  });

  const budget = einnahmen - ausgaben;

  // DOM-Elemente holen
  const einnahmenElement = document.getElementById("monat-einnahmen");
  const ausgabenElement = document.getElementById("monat-ausgaben");
  const budgetElement = document.getElementById("monat-budget");

  // Werte aktualisieren
  einnahmenElement.textContent = `${einnahmen.toFixed(2)} ‚Ç¨`;
  ausgabenElement.textContent = `${ausgaben.toFixed(2)} ‚Ç¨`;
  budgetElement.textContent = `${budget.toFixed(2)} ‚Ç¨`;

  // Klassen dynamisch setzen f√ºr Farbe
  budgetElement.classList.remove("positiv", "negativ");
  if (budget >= 0) {
    budgetElement.classList.add("positiv");  // blau (CSS siehe unten)
  } else {
    budgetElement.classList.add("negativ");  // rot
  }
}

</script>
<!-- Hilfsfunktion f√ºr Budget aktualisieren Ende -->


  <script src="script.js"></script>

</body>
</html>


<!---========================= HIER HTML Ende aber ohne Schluss===========================-->


<script>
  //========================= HIER JS ===========================//


  //========================= HIER JS Ende ===========================//
</script>




<style>
/*---========================= HIER css ===========================-->*/


/*---========================= HIER css Ende ===========================-*/
</style>


<!-- wohl irgendetwas f√ºr offline -->
 <script>
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('service-worker.js');
  }
</script>

  <script src="script.js"></script>

</body>
</html>
